<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BlackSignals: Stress Test</title>
  <meta name="description" content="Paste a claim. Get a forced verdict and sources." />

  <!-- IMPORTANT:
       Do NOT use an inline CSP that blocks scripts unless you know what you're doing.
       If you already have a CSP meta tag, remove it or keep it compatible with external scripts. -->

  <style>
    body{
      margin:0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
      background:#0b0b0b;
      color:#f2f2f2;
    }
    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:48px 22px 60px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:18px;
      align-items:start;
    }
    @media (max-width: 900px){
      .wrap{ grid-template-columns:1fr; }
    }
    h1{ margin:0 0 6px; font-size:32px; }
    p{ margin:8px 0; color:#cfcfcf; line-height:1.5; }
    a{ color:#fff; text-decoration:underline; }
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin:14px 0 20px;
    }
    .badge{
      font-size:12px;
      padding:6px 10px;
      border:1px solid #333;
      border-radius:999px;
      color:#ddd;
      display:inline-flex;
      gap:8px;
      align-items:center;
    }
    .dot{
      width:8px;height:8px;border-radius:50%;
      background:#666;
      display:inline-block;
    }
    .card{
      border:1px solid #222;
      background:#111;
      border-radius:16px;
      padding:18px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
    }
    .label{
      font-size:12px;
      letter-spacing:.12em;
      color:#a9a9a9;
      margin-bottom:10px;
    }
    textarea{
      width:100%;
      min-height:220px;
      border-radius:14px;
      border:1px solid #222;
      background:#0c0c0c;
      color:#f2f2f2;
      padding:14px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      font-size:13px;
      line-height:1.4;
      resize:vertical;
      outline:none;
    }
    .row{
      display:flex;
      gap:10px;
      margin-top:12px;
    }
    button{
      background:#141414;
      color:#fff;
      border:1px solid #2a2a2a;
      border-radius:999px;
      padding:10px 14px;
      cursor:pointer;
      font-weight:600;
    }
    button:hover{ border-color:#444; }
    .hint{
      margin-top:10px;
      font-size:12px;
      color:#9a9a9a;
    }
    pre{
      margin:0;
      white-space:pre-wrap;
      word-break:break-word;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      font-size:13px;
      line-height:1.45;
      color:#f2f2f2;
    }
    .statusline{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:10px;
      color:#bdbdbd;
      font-size:12px;
    }
  </style>

  <!-- External JS only (CSP-safe) -->
  <script src="./app.js" defer></script>
</head>

<body>
  <div class="wrap">
    <div style="grid-column: 1 / -1;">
      <h1>BlackSignals: Stress Test</h1>
      <p>Paste a claim, headline, paragraph, or argument you believe is true. This tool returns assumptions, evidence signals, a falsifier, a forced verdict, and sources so people can check it.</p>

      <div class="topbar">
        <div><a href="/">‚Üê Back to BlackSignals</a></div>
        <div class="badge" id="apiBadge"><span class="dot" id="apiDot"></span><span id="apiStatus">API: unknown</span></div>
      </div>
    </div>

    <div class="card">
      <div class="label">CLAIM / ARGUMENT</div>
      <textarea id="claim" placeholder="Example:
NYC is facing a fiscal crisis like 2008.
(or paste a paragraph, or paste a URL)"></textarea>

      <div class="row">
        <button id="runTest">Stress Test</button>
        <button id="clearBtn" type="button">Clear</button>
      </div>

      <div class="hint">Tip: You can paste just a claim. If you include URLs, the tool will still cross-check them.</div>
    </div>

    <div class="card">
      <div class="statusline">
        <strong>Output</strong>
        <span id="uiState">Idle</span>
      </div>
      <pre id="output">Run a stress test to see results.</pre>
    </div>
  </div>
</body>
</html>
